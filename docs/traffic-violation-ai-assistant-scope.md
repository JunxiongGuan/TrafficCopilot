# 交通违法举报个人 AI 助手（司机端）范围定义 V0.3

## 目标
- 将单次举报流程从约 15 分钟压缩至 1 分钟内（TTR ≤ 60 秒）。
- 在“快”的同时保证受理通过率与证据可用性。
- 满足各地交警平台合规要求（例如：行车中禁止手动举报）。

## 产品形态（新增）
- 用户端为**手机应用**，支持两种交付形态：
  1. 小程序（优先适配微信生态）
  2. APK 应用（Android）
- 用户在本应用内完成取证、识别、确认，并由系统协助对接各城市交警工作号/举报平台。

## 当前业务范围（根据最新确认）

### 纳入（In Scope）
1. **占用应急车道**
2. **闯红灯/逆行**
3. **实线变道**
4. **危险超车时变道不打灯（重点）**

> 说明：
> - “危险超车时变道不打灯”需要单独建模为重点场景，优先保证识别准确率与证据完整度。

### 暂不纳入（Out of Scope）
1. 违法停车
2. 追逐驾驶
3. 频繁变道
4. 加塞

## 平台合规约束
- 对接交警举报平台时，需遵守当地规则；以深圳“随手拍”为代表的场景中，**行车中不能进行举报操作**。
- 产品策略需从“行中提交”改为“行中取证 + 停车后确认并提交”。
- 不同城市平台字段与材料要求不同，系统需基于城市规则模板自动匹配。

## 跨城市平台自动提交能力（新增重点）
- 支持对接中国国内主要城市交警工作号/举报小程序的提交规范。
- 根据城市规则自动生成并填充材料：
  - 违法类型
  - 发生时间与地点
  - 证据视频/图片
  - 举报说明文本
  - 举报人身份字段（按平台要求）
- 用户只需确认最终内容并提交；当平台要求额外材料时，明确提示补充。

## “1分钟举报”MVP流程（合规版）
1. 行车中：一键触发取证（语音或按钮），仅做自动录制与事件标记，不做手动填报。
2. 行车中：自动截取前后关键视频片段（默认前30秒+后30秒）。
3. 停车后：提醒用户进入“待提交案件”，上传/选择视频。
4. AI自动识别视频中的时间、地点、车牌与违法行为类型。
5. 按目标城市平台模板自动填报材料。
6. 用户仅确认最终结果后提交到对应平台。

## 上传视频自动识别能力

### 输入
- 用户本地录制视频或行车记录仪导出视频。

### 自动抽取
- 视频时间信息（文件元数据 + 画面时间戳交叉校验）。
- 地点信息（GPS轨迹或用户补充定位）。
- 目标车辆车牌。
- 违法行为标签（占应急车道、闯红灯/逆行、实线变道、危险超车变道不打灯）。

### 输出
- 平台可提交的结构化案件草稿。
- 证据充分性评分与补充建议（如“车牌不清晰，请补充更清晰片段”）。

## 身份信息与授权存储（新增）
- 若平台提交需要举报人身份信息（如身份证号、手机号等），默认策略：
  - 系统先检查本地是否已有可用信息。
  - 若无，则提示用户手动输入必填字段。
- 对个人敏感信息的保存必须满足：
  - **先征得用户明确授权**（单独勾选同意，不与其他授权混合）。
  - 仅本地安全存储（加密、最小化字段、可随时删除）。
  - 用于“下次自动填报”前再次展示并允许用户修改。
- 未获授权时，不得持久化保存，仅本次提交临时使用。

## 重点场景：危险超车时变道不打灯

### 证据要素
- 目标车辆变道轨迹明确（跨车道线）。
- 转向灯状态未开启（连续多帧判断）。
- 与本车/周边车辆存在明显风险关系（相对速度、车距变化）。
- 车牌清晰可辨。
- 时间与地点可校验。

### AI能力建议
- 车道线与车辆轨迹联合检测。
- 灯光状态时序识别（避免单帧误判）。
- 风险评分模型（仅高置信度自动建议提交）。
- 低置信度时引导用户补充证据而非直接提交。

## MVP路线图（已确认执行）
- **执行原则**：严格按 Phase 逐步推进，上一阶段测试通过后再进入下一阶段。
- **Phase 1（先做）**：
  - 城市范围：**深圳 + 成都**。
  - 目标：打通“行中取证、停车后提交”的端到端闭环，并完成两城规则适配。
  - 能力边界：覆盖基础高频场景 + 占用应急车道 + 实线变道。
- **Phase 2（Phase 1 验收通过后启动）**：
  - 扩展模板化自动填报能力与身份信息授权/本地安全保存能力。
  - 强化复杂场景识别策略与提交成功率。
- **Phase 3（后续）**：
  - 强化“危险超车时变道不打灯”专项识别与证据评分能力，并扩展更多城市规则。


## 核心能力架构（落地版）

### 1) 端侧采集与案件生成
- 行车中仅做取证与事件标记，不触发复杂交互。
- 停车后自动进入“待提交案件”列表，生成案件草稿（含时间、地点、车牌、疑似违法标签）。

### 2) 视频理解与证据评分
- 多模态引擎输出：违法类型、关键帧、车牌置信度、时间地点完整度。
- 证据评分分级：
  - A（可直接提交）
  - B（建议补充描述）
  - C（证据不足，阻断自动提交）

### 3) 城市规则适配器（City Adapter）
- 按城市维护提交模板：字段映射、材料清单、格式校验、禁提规则。
- 示例：深圳随手拍适配器负责“行车中不可提交流程约束”和字段规范校验。
- 适配器输出统一结构，交给提交编排器执行，避免业务层写大量 if/else。

### 4) 提交编排器（Submission Orchestrator）
- 输入：案件草稿 + 城市模板 + 用户身份字段（如需）。
- 执行：自动填报 -> 失败重试 -> 缺失项回填提示 -> 用户最终确认。
- 输出：提交结果（成功/待补充/失败）及可追溯日志。

### 5) 身份信息安全模块
- 缺身份证号/手机号时弹出手动输入，仅收集平台必填字段。
- 仅在用户明确授权后，本地加密保存并支持随时删除。
- 默认不跨端同步敏感字段，降低泄露风险。

### 6) 用户确认体验（1分钟关键页）
- 最终确认页只保留 6 类信息：
  1. 违法类型
  2. 发生时间
  3. 发生地点
  4. 目标车辆车牌
  5. 证据材料（视频/关键帧）
  6. 举报人必填信息
- 交互原则：默认自动填好，用户只改错不重填。

## 当前决策记录（本轮确认）
1. 采用分阶段实施策略：先做 Phase 1，测试通过后再进入 Phase 2。
2. Phase 1 首批城市锁定为：**深圳、成都**。
3. Phase 2 暂不提前并行开发，以 Phase 1 验收结果作为启动条件。
4. 继续维持“用户最终确认后提交”的产品交互原则。
